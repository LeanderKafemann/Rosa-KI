<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KI Arena Playground</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/arena-playground.css">
</head>
<body>
    <div class="viz-toolbar">
        <!-- Zeile 1: Men√º + Titel + Spiel-Auswahl -->
        <div style="width: 100%; display: flex; align-items: center; gap: 15px; margin-bottom: 10px;">
            <a href="../index.html" class="viz-btn btn-back">‚¨Ö Men√º</a>
            <span style="font-weight:bold; color:white; flex: 1;">ü§ñ KI Arena Playground</span>
            
            <!-- Spiel-Auswahl -->
            <div class="viz-control-group" style="margin: 0;">
                <label class="viz-label">Spiel:</label>
                <select id="gameSelect" class="viz-select">
                    <option value="TTT Regular" selected>Tic-Tac-Toe (3√ó3)</option>
                    <option value="TTT 3D">Tic-Tac-Toe 3D</option>
                    <option value="TTT Ultimate">Tic-Tac-Toe Ultimate</option>
                </select>
            </div>
        </div>

        <!-- Zeile 2: Agent 1 Auswahl + Parameter -->
        <div style="width: 100%; display: flex; align-items: center; gap: 15px; margin-bottom: 10px;">
            <div class="viz-control-group" style="margin: 0; flex: 1;">
                <label class="viz-label">Agent 1 (Blau):</label>
                <select id="agent1Select" class="viz-select" onchange="updateAgent1Params()">
                    <option value="minimaxCautious">Minimax (Vorsichtig)</option>
                    <option value="minimaxBalanced" selected>Minimax (Ausgewogen)</option>
                    <option value="minimaxAggressive">Minimax (Aggressiv)</option>
                    <option value="minimaxHeuristicCentered">Minimax (Zentral)</option>
                    <option value="minimaxHeuristicMobility">Minimax (Mobilit√§t)</option>
                    <option value="ruleBasedConservative">Regel-KI (Konservativ)</option>
                    <option value="ruleBasedBalanced">Regel-KI (Ausgewogen)</option>
                    <option value="ruleBasedAggressive">Regel-KI (Offensiv)</option>
                    <option value="random">Zufalls-KI</option>
                </select>
            </div>
            
            <!-- Agent 1 Parameter -->
            <div class="viz-control-group" id="agent1ParamGroup" style="display: none; margin: 0;">
                <!-- Wird dynamisch gef√ºllt -->
            </div>
        </div>

        <!-- Zeile 3: Agent 2 Auswahl + Parameter -->
        <div style="width: 100%; display: flex; align-items: center; gap: 15px; margin-bottom: 10px;">
            <div class="viz-control-group" style="margin: 0; flex: 1;">
                <label class="viz-label">Agent 2 (Rot):</label>
                <select id="agent2Select" class="viz-select" onchange="updateAgent2Params()">
                    <option value="minimaxCautious">Minimax (Vorsichtig)</option>
                    <option value="minimaxBalanced">Minimax (Ausgewogen)</option>
                    <option value="minimaxAggressive" selected>Minimax (Aggressiv)</option>
                    <option value="minimaxHeuristicCentered">Minimax (Zentral)</option>
                    <option value="minimaxHeuristicMobility">Minimax (Mobilit√§t)</option>
                    <option value="ruleBasedConservative">Regel-KI (Konservativ)</option>
                    <option value="ruleBasedBalanced">Regel-KI (Ausgewogen)</option>
                    <option value="ruleBasedAggressive">Regel-KI (Offensiv)</option>
                    <option value="random">Zufalls-KI</option>
                </select>
            </div>
            
            <!-- Agent 2 Parameter -->
            <div class="viz-control-group" id="agent2ParamGroup" style="display: none; margin: 0;">
                <!-- Wird dynamisch gef√ºllt -->
            </div>
        </div>

        <!-- Zeile 4: Steuerung -->
        <div style="width: 100%; display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
            <!-- Anzahl Spiele -->
            <div class="viz-control-group" style="margin: 0;">
                <label class="viz-label">Spiele:</label>
                <input type="number" id="numGames" min="1" max="10000" value="100" class="viz-input-number">
            </div>

            <!-- Advanced Stats Checkbox -->
            <div class="viz-checkboxes" style="margin: 0;">
                <label class="viz-checkbox-label">
                    <input type="checkbox" id="showAdvancedStats">
                    ‚öôÔ∏è Advanced Stats
                </label>
            </div>

            <!-- Start/Stop Buttons -->
            <button id="startButton" class="viz-btn viz-btn-action">üöÄ Start</button>
            <button id="stopButton" class="viz-btn viz-btn-restart" disabled style="display: none;">‚èπ Stop</button>
        </div>
    </div>

    <div class="arena-container">
        <!-- Agent Parameter Modal -->
        <div id="agentConfigModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="modal-close" onclick="closeAgentConfig()">&times;</span>
                <h3 id="agentConfigTitle">Agent Konfiguration</h3>
                
                <div id="agentConfigContent">
                    <!-- Wird dynamisch gef√ºllt -->
                </div>
                
                <button onclick="saveAgentConfig()" class="viz-btn viz-btn-action" style="margin-top: 15px;">‚úì Speichern</button>
            </div>
        </div>

        <!-- Quick Info -->
        <div style="background: white; padding: 15px; margin-bottom: 15px; border-radius: 6px; border-left: 3px solid #3498db;">
            <p style="margin: 0; color: #2c3e50;"><strong>üí° Tipp:</strong> Klick auf einen Agent um Parameter anzupassen (Suchtiefe, Heuristik, Regeln)</p>
        </div>

        <!-- FORTSCHRITTS-ANZEIGE -->
        <div class="progress-section" id="progressSection" style="display: none;">
            <h3>‚è≥ Simulation l√§uft...</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p class="progress-text" id="progressText">0 / 100 Spiele</p>
        </div>

        <!-- STATISTIK-ERGEBNISSE -->
        <div class="results-section" id="resultsSection" style="display: none;">
            <h3>üìä Ergebnisse</h3>

            <!-- Spielfeld Visualisierung (wenn Replay vorhanden) -->
            <div id="gameboardVisualization" style="display: none; margin-bottom: 20px;">
                <h4>Erstes Spiel - Spielverlauf</h4>
                <div id="gameboard" style="background: white; padding: 15px; border-radius: 6px; border: 1px solid #ddd; margin: 10px 0;"></div>
            </div>
            
            <!-- √úbersicht -->
            <div class="stats-overview">
                <div class="stat-card blue">
                    <div class="stat-value" id="statBlueWins">0</div>
                    <div class="stat-label">Siege (Blau)</div>
                    <div class="stat-percentage" id="statBluePercent">0%</div>
                </div>

                <div class="stat-card draw">
                    <div class="stat-value" id="statDraws">0</div>
                    <div class="stat-label">Unentschieden</div>
                    <div class="stat-percentage" id="statDrawPercent">0%</div>
                </div>

                <div class="stat-card red">
                    <div class="stat-value" id="statRedWins">0</div>
                    <div class="stat-label">Siege (Rot)</div>
                    <div class="stat-percentage" id="statRedPercent">0%</div>
                </div>
            </div>

            <!-- Details -->
            <div class="stats-details">
                <div class="detail-item">
                    <span class="detail-label">√ò Z√ºge pro Spiel:</span>
                    <span id="statAvgMoves" class="detail-value">0</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">√ò Spieldauer:</span>
                    <span id="statAvgTime" class="detail-value">0 ms</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Gesamt-Zeit:</span>
                    <span id="statTotalTime" class="detail-value">0 s</span>
                </div>
            </div>

            <!-- Advanced Stats (Toggle) -->
            <details class="stats-advanced" id="advancedStatsPanel" style="display: none;">
                <summary>‚öôÔ∏è Advanced Statistiken</summary>
                <div class="advanced-content">
                    <div class="detail-item">
                        <span class="detail-label">√ò Zugzeit (Blau):</span>
                        <span id="statBlueAvgTime" class="detail-value">0 ms</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Max Zugzeit (Blau):</span>
                        <span id="statBlueMaxTime" class="detail-value">0 ms</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">√ò Zugzeit (Rot):</span>
                        <span id="statRedAvgTime" class="detail-value">0 ms</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Max Zugzeit (Rot):</span>
                        <span id="statRedMaxTime" class="detail-value">0 ms</span>
                    </div>
                </div>
            </details>

            <!-- Agent-Namen anzeigen -->
            <div class="agent-names">
                <p><strong>Agent 1 (Blau):</strong> <span id="agentBlueName">-</span></p>
                <p><strong>Agent 2 (Rot):</strong> <span id="agentRedName">-</span></p>
            </div>

            <button id="resetButton" class="viz-btn viz-btn-action">üîÑ Neuer Vergleich</button>
        </div>

        <!-- FEHLER-ANZEIGE -->
        <div class="error-section" id="errorSection" style="display: none;">
            <h3>‚ö†Ô∏è Fehler</h3>
            <p id="errorMessage" class="error-message"></p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../js/core/agent.js"></script>
    <script src="../js/core/game-state.js"></script>
    <script src="../js/games/tictactoe/logic.js"></script>
    <script src="../js/ai/heuristics.js"></script>
    <script src="../js/ai/minimax.js"></script>
    <script src="../js/ai/agents/minimax-agent.js"></script>
    <script src="../js/ai/agents/rule-based-agent.js"></script>
    <script src="../js/ai/agents/random-agent.js"></script>
    <script src="../js/ai/rules/rule-structure.js"></script>
    <script src="../js/ai/rules/ttt-rules.js"></script>
    <script src="../js/ai/game-adapter.js"></script>
    <script src="../js/ai/agent-profiles.js"></script>
    <script src="../js/ai/arena-controller.js"></script>
</body>
</html>

