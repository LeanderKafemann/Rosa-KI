<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>3D Tic-Tac-Toe</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/tictactoe.css">
    <style>
        /* Spezielles Layout für 3D: Split View im Game Area */
        .game-split {
            display: flex;
            flex-direction: row;
            align-items: flex-start;
            justify-content: center;
            gap: 20px;
            width: 100%;
            padding: 20px;
            box-sizing: border-box;
        }
        .main-view { flex: 2; display: flex; flex-direction: column; align-items: center; }
        .side-view { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        
        #isoCanvas { background: transparent; box-shadow: none; border: 1px solid #ddd; border-radius: 8px; }
    </style>
</head>
<body>

    <aside class="sidebar">
        <div class="sidebar-header">
            <a href="tictactoe-menu.html" class="viz-btn btn-back">⬅ TTT Menü</a>
            <h2>3D TTT</h2>
        </div>

        <div class="sidebar-content">
            <div class="control-section">
                <label class="viz-label">Größe</label>
                <div class="size-selector">
                    <button class="size-btn active" onclick="ThreeDController.setSize(3)">3x3x3</button>
                    <button class="size-btn" onclick="ThreeDController.setSize(4)">4x4x4</button>
                </div>
            </div>

            <div class="control-section">
                <label class="viz-label">Spieler 1 (Blau)</label>
                <select id="p1Type" class="viz-select">
                    <option value="human">Mensch</option>
                    <option value="random">KI: Zufall</option>
                    <option value="rulebased">KI: Regeln</option>
                    <option value="minimax">KI: Minimax</option>
                </select>
                
                <label class="viz-label" style="margin-top:10px;">Spieler 2 (Rot)</label>
                <select id="p2Type" class="viz-select">
                    <option value="human">Mensch</option>
                    <option value="random" selected>KI: Zufall</option>
                    <option value="rulebased">KI: Regeln</option>
                    <option value="minimax">KI: Minimax</option>
                </select>
            </div>

            <div class="control-section">
                <label class="viz-label">Tempo</label>
                <input type="range" id="aiSpeed" min="0" max="2000" step="10" value="1000">
            </div>

            <div class="control-section" style="text-align:center;">
                <div id="statusText" class="stats-display">Bereit</div>
            </div>

            <button class="viz-btn btn-restart" onclick="ThreeDController.reset()">Neustart</button>
        </div>
    </aside>

    <main class="game-area">
        <div class="game-split">
            <div class="main-view">
                <div class="view-controls">
                    <button class="view-btn active" onclick="ThreeDController.setAxis('z')">Ebenen (Oben)</button>
                    <button class="view-btn" onclick="ThreeDController.setAxis('y')">Tiefe (Vorne)</button>
                    <button class="view-btn" onclick="ThreeDController.setAxis('x')">Schnitt (Seite)</button>
                </div>
                
                <canvas id="gameCanvas" width="700" height="300"></canvas>
                
                <p style="color:#7f8c8d; font-size:0.9rem; margin-top:15px; text-align:center;">
                    Klicke in die Schnittebenen, um zu setzen.
                </p>
            </div>

            <div class="side-view">
                <label class="viz-label">3D Vorschau</label>
                <canvas id="isoCanvas" width="250" height="300"></canvas>
            </div>
        </div>
    </main>

    <script src="../js/core/game-state.js"></script>
    <script src="../js/core/agent.js"></script>
    <script src="../js/core/game-adapter.js"></script>
    <script src="../js/core/base-game-controller.js"></script>
    <script src="../js/ai/agents/random-agent.js"></script>
    <script src="../js/ai/agents/rule-based-agent.js"></script>
    <script src="../js/ai/minimax.js"></script>
    <script src="../js/ai/agents/minimax-agent.js"></script>
    <script src="../js/ai/heuristics/base.js"></script>
    <script src="../js/ai/heuristics/ttt.js"></script>
    <script src="../js/ai/rules/rule-structure.js"></script>
    <script src="../js/ai/rules/ttt-rules.js"></script>
    
    <script src="../js/games/tictactoe/logic.js"></script>
    <script src="../js/games/tictactoe/renderer.js"></script>
    <script src="../js/games/tictactoe/3d-controller.js"></script>

    <script>
        // ✅ Globale Instanz für Buttons/Links
        const ThreeDController = new ThreeDGameController();
        window.onload = () => ThreeDController.init();
    </script>

</body>
</html>